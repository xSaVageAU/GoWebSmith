{{ define "extra_css" }}
    <link rel="stylesheet" href="/static/css/admin-editor.css">
{{ end }}

{{ define "content" }}
{{/* .ModuleData here will be the *model.Module from the handler */}}
{{/* Removed H2 title to save vertical space */}}
{{/* <h2>Editing Module: {{ .ModuleData.Name }} ({{ .ModuleData.ID }})</h2> */}}

<div class="gws-editor-layout" data-module-id="{{ .ModuleData.ID }}">

    {{/* File List Pane */}}
    <div class="gws-file-list-pane">
        <h4>Templates</h4>
        <ul id="template-file-list">
            {{ range .ModuleData.Templates }}
            <li>
                <button class="file-button" data-filename="{{ .Name }}">
                    {{ .Name }}
                    {{ if .IsBase }}<span class="gws-base-badge">Base</span>{{ end }}
                </button>
            </li>
            {{ else }}
            <li>No templates found for this module.</li>
            {{ end }}
        </ul>
        {{/* TODO: Add button to add new template file? */}}
    </div>

    {{/* Preview Pane - Now takes up the main space next to file list */}}
    <div class="gws-preview-pane-container">
        <div class="gws-preview-header">
             <h4>Live Preview</h4>
             <span class="gws-module-id-display">ID: {{ .ModuleData.ID }}</span>
        </div>
        <div id="preview-pane">
            Select a file and start editing to see preview...
        </div>
    </div>

    {{/* Editor Overlay Container - Positioned via CSS */}}
    <div id="gws-editor-overlay-container" class="gws-editor-overlay"> <!-- Was gws-editor-pane -->
        <div id="gws-editor-resizer" class="gws-editor-resizer"></div> <!-- Resizer Handle -->
        <div class="gws-editor-controls">
            <h4>Editor: <span id="current-filename">No file selected</span></h4>
            <div> <!-- Wrapper for button and status -->
                <button id="save-changes-button" disabled>Save Changes</button>
                <span id="save-status"></span>
            </div>
        </div>
        <textarea id="editor-content"
            placeholder="Select a file from the left to edit..."
            readonly
        ></textarea>
    </div>

</div>

<script src="/static/js/admin-editor.js" defer></script>
{{ end }}